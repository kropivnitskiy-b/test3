name: Deployment
on:
  push:
    branches:
      - test-vars
env:
  SEC_1: ${{ secrets.SECRET_1 }}
  SEC_3: ${{ secrets.SECRET_3 }}
jobs:
  test:
    env:
      SEC_1: ${{ secrets.SECRET_1 }}
      SEC_2: ${{ secrets.SECRET_2 }}
    environment: testing
    runs-on: ubuntu-latest
    steps:
      - name: Output information
        run: |
          echo "SEC_1: ${{ env.SEC_1 }}"
          echo "SEC_2: ${{ env.SEC_2 }}"
          echo "SEC_3: ${{ env.SEC_3 }}"
  deploy:
    env:
      SEC_1: "updated_secret"
    needs: test
    runs-on: ubuntu-latest
    steps:
      - name: Output information
        run: |        
          echo "SEC_1: ${{ env.SEC_1 }}"
          echo "SEC_2: ${{ env.SEC_2 }}"
          echo "SEC_3: ${{ env.SEC_3 }}"
